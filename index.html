<!DOCTYPE html>
<html> 
	<head>
    	<title>pixiJS testing</title> 
		<style>
			body{
				margin: 0;
			}
			canvas{
				display: block;
				background: black;
				text-align:center;
			}
		</style>
	</head>
	<body>
		<canvas id="myCanvas" align="center"></canvas>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.3/pixi.min.js">
		</script>
		<script type="text/javascript">
			const canvas = document.getElementById('myCanvas');

			console.log("set canvas h/w");*/
			
			let _w = window.innerWidth;
			let _h = window.innerHeight;

			const renderer = new PIXI.Renderer({
				view: canvas,
				width: _w * 0.75,
				height: _h * 0.75,
				resolution: window.devicePixelRatio,
				autoDensity: true				
			});

			window.addEventListener('resize', resize);

			function resize() {
				_w = window.innerWidth * 0.75;
				_h = window.innerHeight * 0.75;

				renderer.resize(_w, _h);	
			}

			const stage = new PIXI.Container();
			
			/*const texture = PIXI.Texture.from('https://cicada330156.github.io/PIXIJS_testing/pier_photo-B&W-Isabella_Merl.jpeg');
			const img = new PIXI.Sprite(texture);
			img.anchor.x = 0.5;
			img.anchor.y = 0.5;
			stage.addChild(img);
			console.log("added image");

			ticker.add(animate);*/

			console.log(PIXI.utils.TextureCache);

			const ticker = new PIXI.Ticker();
			ticker.start();
			
			console.log(renderer.resolution + ", " + renderer.width); 


			let loader = PIXI.Loader.shared;
			loader.onComplete.add(handleLoadComplete);

			loader.add('pier', 'https://cicada330156.github.io/PIXIJS_testing/pier_photo-B&W-Isabella_Merl.jpeg');
			loader.add('dove', 'https://cicada330156.github.io/PIXIJS_testing/dove_clipart.png');
			loader.add('phone', 'https://cicada330156.github.io/PIXIJS_testing/iphone.png');
			loader.add('bird', 'https://cicada330156.github.io/PIXIJS_testing/cardinal_clipart.png');
			loader.add('pizza', 'https://cicada330156.github.io/PIXIJS_testing/pizza.png');
			loader.on("progress", handleLoadProgress);
			loader.load();
			
			let img;
			
			function handleLoadProgress(loader, resource) {
				console.log(loader.progress + "% loaded");

			}

			function handleLoadComplete() {
				let texture = loader.resources['pier'].texture;
				img = new PIXI.Sprite(texture);
				img.anchor.x = 0.5;
				img.anchor.y = 0.5;
				stage.addChild(img);
				
				img2 = new PIXI.Sprite(texture);
				img.anchor.x = 1;
				img.anchor.y = 1;
				stage.addChild(img2);
				ticker.add(animate);
			}

			function animate() {
				
				img.y = renderer.screen.height / 2;
				img.x = renderer.screen.width / 2;
				
				img.width = renderer.screen.width / 2;
				img.height = renderer.screen.width*0.66/2;
				
				img.rotation += 0.1;

				img2.x = 

				renderer.render(stage);
			}
		</script>
	</body>
</html>
